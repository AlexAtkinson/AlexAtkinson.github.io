<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Alex Atkinson — pages.evilkittens.co</title>
    <meta name="description" content="Curated index of useful GISTs." />
    <link rel="canonical" href="https://pages.evilkittens.co/" />
    <link rel="preload" as="image" href="assets/images/bike-in-summer.webp">
    <link rel="stylesheet" href="assets/theme.css">
    <script src="assets/theme.js" defer></script>
</head>
<body>
    <div class="hero" fetchpriority="high">
        <div class="hero-theme" aria-label="Theme toggle">
            <button class="theme-toggle" data-theme-toggle aria-pressed="false" title="Toggle theme"></button>
        </div>
        <div class="hero-inner">
                <div class="container">
                    <h2>Articles</h2>
                    <p class="small">An index for the tools and knowledge that I share publicly.</p>
                </div>
        </div>
    </div>

    <div class="wrap">
        <header>
        <div class="header-left">
            <div class="avatar-wrap">
                <img
                    class="avatar"
                    fetchpriority="high"
                    srcset="assets/images/avatar-alex-in-summer_128.webp 128w, assets/images/avatar-alex-in-summer_256.webp 256w, assets/images/avatar-alex-in-summer_512.webp 512w"
                    sizes="(max-width:520px) 48px, 72px"
                    src="assets/images/avatar-alex-in-summer.webp"
                    alt="Alex Atkinson avatar"
                    loading="lazy">
            </div>
            <div>
                <h1>Alex Atkinson</h1>
                <div class="sub">Dev*Ops, Infra, and Platform Engineering</div>
            </div>
        </div>
        </header>

        <main>
            <section class="card" id="intro">
                <h1>Introduction</h1>
                <p class="small">
                    Modern technologies are dependent upon a broad landscape of varying disciplines and deep expertise to be well executed. These articles and tools are authored with the greatest hope that they improve Quality of Life for both ourselves and our customers.<br>
                    In short: A 4-hour work week for us, and amazing UX for them.
                </p>
            </section>

            <section class="card" id="gists">
                <h2>Curated GISTs</h2>
                <p class="small">Primers represent foundational material on a subject, which may contain guides, while Guides and references are just that.</p>

                <div id="gist-list" class="grid" aria-live="polite">
                    <!-- Placeholder content while JS populates -->
                    <div class="list-empty card">Loading gists…</div>
                </div>

                <noscript class="small">
                    JavaScript is disabled. To populate this index, enable JavaScript or edit this page with static links to your gists.
                </noscript>
            </section>
        </main>

        <footer>
            <div>Stay Cool</div>
        </footer>
    </div>

    <script>
        // Curated list: replace these IDs with real GIST IDs to display titles and description automatically.
        // The site will prefer a pre-generated `assets/gists.json` (created by
        // `scripts/fetch_gists.py`) if present to avoid live API calls.
        const curated = [
            '42d91031604aaedc0ec5a879afb3410f',
            '7be00d6be71fab970210006b9574e1e5',
            '37d64e4e0527f6e5f9d57280669ad055',
            '164c45f981355fba2dd59cf7632720a5',
            '31b5bc527b07406950618a7e6bd1ec81',
            '7246dfafa76973c6cc60ac5fa5ce0858',
            'f0bf8c89dda97ef42b5ba3575ab20363'
        ];

        const container = document.getElementById('gist-list');

        async function fetchGist(id){
            const res = await fetch('https://api.github.com/gists/' + id);
            if(!res.ok) throw new Error('Failed to fetch gist ' + id);
            return res.json();
        }

        function titleFromFilename(fn){
            if(!fn) return '';
            let name = fn.replace(/^[^a-zA-Z0-9]+/, '');
            name = name.replace(/\.[^/.]+$/, '');
            return name || fn;
        }

        (async function render(){
            container.innerHTML = ''; // clear placeholder

            function gistCardLink(gist, title){
                const link = document.createElement('a');
                link.className = 'gist card';
                link.href = gist.html_url;
                link.target = '_blank';
                link.rel = 'noopener noreferrer';
                link.innerHTML = [
                    `<div class="gist-title">${escapeHtml(title)}</div>`,
                    `<div class="meta">${escapeHtml(gist.description || '')}</div>`
                ].join('');
                return link;
            }

            // 1) Try to load a local pre-built asset to avoid API calls
            try{
                const res = await fetch('assets/gists.json', {cache: 'no-cache'});
                if(res.ok){
                    const local = await res.json();
                    if(Array.isArray(local) && local.length){
                        for(const gist of local){
                            const firstFile = Object.keys(gist.files || {})[0];
                            const title = titleFromFilename(firstFile) || gist.description || gist.id;
                            container.appendChild(gistCardLink(gist, title));
                        }
                        return; // done
                    }
                }
            }catch(e){
                // fall through to live-fetch fallback
                console.warn('Local gists.json not found or invalid, falling back to API');
            }

            // 2) Fallback: live fetch using curated IDs
            if(!curated.length){
                container.innerHTML = '<div class="list-empty card">No gists configured.</div>';
                return;
            }

            for(const id of curated){
                const placeholder = document.createElement('div');
                placeholder.className = 'gist card gist-loading';
                placeholder.innerHTML = '<div class="small">Loading…</div>';
                container.appendChild(placeholder);

                try{
                    if(id.startsWith('PLACEHOLDER')){
                        placeholder.innerHTML = '<strong>Replace PLACEHOLDER_GIST_ID with a real Gist ID</strong><div class="meta">Edit index in index.html to point to curated gists.</div>';
                        continue;
                    }
                    const gist = await fetchGist(id);
                    const firstFile = Object.keys(gist.files)[0];
                    const title = titleFromFilename(firstFile) || gist.description || id;
                    placeholder.replaceWith(gistCardLink(gist, title));
                }catch(err){
                    placeholder.innerHTML = '<strong>Unable to load gist: ' + escapeHtml(id) + '</strong><div class="meta">' + escapeHtml(err.message) + '</div>';
                }
            }
        })();

        function escapeHtml(str){ return String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s])); }
    </script>
        <script>
            // Register the service worker to enable offline and caching strategies
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('Service worker registered:', reg.scope))
                    .catch(err => console.warn('Service worker registration failed:', err));
            }
        </script>
</body>
</html>